; ============================================
; Scheduler - Sync Otomatis (RECOMMENDED: Use Cron Instead)
; ============================================
; CATATAN: Untuk production, lebih baik gunakan system cron
; daripada supervisor untuk scheduler. Lihat DEPLOYMENT_GUIDE.md
;
; Jika tetap ingin pakai supervisor, gunakan config ini:
[program:inlab-sync]
command=/bin/bash -c "while true; do /usr/bin/php /var/www/be-internal-label/artisan schedule:run; sleep 60; done"
directory=/var/www/be-internal-label
user=www-data
autostart=true
autorestart=true
redirect_stderr=true
stdout_logfile=/var/www/be-internal-label/storage/logs/scheduler.log
stdout_logfile_maxbytes=10MB
stdout_logfile_backups=5
stopwaitsecs=10
startsecs=0
startretries=3

; ============================================
; Queue Worker - Manual Sync (BARU)
; ============================================
[program:inlab-queue]
process_name=%(program_name)s_%(process_num)02d
command=/usr/bin/php /var/www/be-internal-label/artisan queue:work database --sleep=3 --tries=1 --max-time=3600 --timeout=900
directory=/var/www/be-internal-label
user=www-data
autostart=true
autorestart=true
redirect_stderr=true
stdout_logfile=/var/www/be-internal-label/storage/logs/queue-worker.log
stdout_logfile_maxbytes=10MB
stdout_logfile_backups=5
stopwaitsecs=3600
numprocs=2
